{% extends "base.html" %}
{% block title %}Candidaturi primite{% endblock %}
{% block content %}
<section class="container">
  <h1>Candidaturi primite</h1>
  {% if applications %}
    <ul class="list">
      {% for a in applications %}
        <li class="card">
          <div class="card-body">
            <h3>{{ a.job.title }} — {{ a.seeker.username }}</h3>
            {% if a.status %}
              <form method="post" class="inline-form">
                {% csrf_token %}
                <input type="hidden" name="app_id" value="{{ a.id }}" />
                <select name="status">
                  {% for s,v in a._meta.get_field('status').choices %}
                    <option value="{{ s }}" {% if a.status == s %}selected{% endif %}>{{ v }}</option>
                  {% endfor %}
                </select>
                <button class="btn btn--sub" type="submit">Actualizează</button>
              </form>
            {% endif %}

            {% if a.cover_letter %}<p class="mt-2"><strong>Mesaj:</strong> {{ a.cover_letter|linebreaks }}</p>{% endif %}
            {% if a.answers.all %}
              <div class="mt-2">
                <strong>Răspunsuri screening:</strong>
                <ul class="list">
                  {% for ans in a.answers.all %}
                    <li>{{ ans.question.text }} — <em>{{ ans.answer_text }}</em></li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Nu există candidaturi încă.</p>
  {% endif %}
</section>
{% endblock %}