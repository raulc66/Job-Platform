
{% extends "base.html" %}
{% block title %}Candidați{% endblock %}
{% block content %}
<section class="container">
  <h1>Inbox candidați</h1>

  {% with current=request.GET.status|default:"" %}
  <nav class="tabs">
    {% for code,label in [
      ("", "Toate"),
      ("submitted", "Neridicate"),
      ("viewed", "Văzute"),
      ("interview", "Interviu"),
      ("offer", "Ofertă"),
      ("rejected", "Respins"),
    ] %}
      {% with q=request.GET.copy %}{% if code %}{% with _=q.__setitem__("status", code) %}{% endif %}
        <a class="tab {% if current == code %}active{% endif %}" href="?{{ q.urlencode }}">{{ label }}</a>
      {% if code %}{% endwith %}{% endif %}{% endwith %}
    {% endfor %}
  </nav>
  {% endwith %}

  <div class="mt-2">
    <a class="btn btn-ghost" href="?{{ request.GET.urlencode }}&format=csv">Export CSV</a>
  </div>

  <div id="inbox-table" data-endpoint="{% url 'applications:status_update' %}">
    <table class="table">
      <thead>
        <tr>
          <th>Job</th>
          <th>Candidat</th>
          <th>Trimis</th>
          <th>Status</th>
          <th>Acțiuni</th>
        </tr>
      </thead>
      <tbody>
        {% for a in applications %}
          {% include "applications/_row.html" with a=a %}
        {% empty %}
          <tr><td colspan="5">Nu există aplicații pentru filtrul curent.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
